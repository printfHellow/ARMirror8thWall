<!-- Copyright (c) 2022 8th Wall, Inc. -->
<!-- body.html with improved wall and plane detection -->

<div class="over">
  <span id="promptText">Tap on walls or ground to place model</span>
</div>

<!-- Control Buttons (Delete & Lock) -->
<div id="controlButtons" style="display: none">
  <button id="deleteBtn" class="control-btn delete-btn" title="Delete Model">ğŸ—‘ï¸</button>
  <button id="lockBtn" class="control-btn lock-btn" title="Lock/Unlock Position">ğŸ”“</button>
</div>

<!-- Model Selector UI -->
<div id="modelSelector">
  <div class="nav-button" id="prevPage">â—€</div>
  <div id="modelGrid">
    <!-- Model buttons will be dynamically generated here -->
  </div>
  <div class="nav-button" id="nextPage">â–¶</div>
  <div id="pageIndicator">1/1</div>
</div>

<!-- Add the tap-place component to the scene -->
<a-scene
  tap-place
  landing-page
  xrextras-loading
  xrextras-runtime-error
  renderer="colorManagement:true"
  xrweb="
    allowedDevices: any;
    defaultEnvironmentFogIntensity: 0.5; 
    defaultEnvironmentFloorTexture: #groundTex; 
    defaultEnvironmentFloorColor: #FFF;
    defaultEnvironmentSkyBottomColor: #B4C4CC; 
    defaultEnvironmentSkyTopColor: #5ac8fa;
    defaultEnvironmentSkyGradientStrength: 0.5;"
  xr-planes="enabled: true; classification: true; detectionMode: all;">
  <!-- ^ QUAN TRá»ŒNG: detectionMode: all Ä‘á»ƒ detect cáº£ tÆ°á»ng vÃ  sÃ n -->

  <a-assets>
    <img id="groundTex" src="assets/sand.jpg" />
    <a-asset-item id="model1" src="assets/Model1.glb"></a-asset-item>
    <a-asset-item id="model2" src="assets/Model2.glb"></a-asset-item>
    <a-asset-item id="model3" src="assets/guong3.glb"></a-asset-item>
    <a-asset-item id="model4" src="assets/guong2.glb"></a-asset-item>
    <a-asset-item id="model5" src="assets/Model3_1.glb"></a-asset-item>
    <a-asset-item id="model6" src="assets/Model4_1.glb"></a-asset-item>
    <a-asset-item id="model7" src="assets/Guong7_2.glb"></a-asset-item>
  </a-assets>

  <!-- Camera with improved raycaster -->
  <a-camera
    id="camera"
    position="0 8 8"
    raycaster="
      objects: .cantap, .placed-model, [xr-planes];
      far: 100;
      near: 0.1;"
    cursor="
      fuse: false;
      rayOrigin: mouse;">
  </a-camera>

  <!-- Directional light -->
  <a-entity
    light="
      type: directional;
      intensity: 0.8;
      castShadow: true;
      shadowMapHeight:2048;
      shadowMapWidth:2048;
      shadowCameraTop: 40;
      shadowCameraBottom: -40;
      shadowCameraRight: 40;
      shadowCameraLeft: -40;
      target: #camera"
    xrextras-attach="target: camera; offset: 8 15 4"
    position="1 4.3 2.5"
    shadow>
  </a-entity>

  <a-light type="ambient" intensity="0.5"></a-light>

  <!-- Ground plane vá»›i cantap class -->
  <a-box
    id="ground"
    class="cantap"
    scale="1000 2 1000"
    position="0 -0.99 0"
    material="shader: shadow; transparent: true; opacity: 0.4"
    shadow>
  </a-box>

  <!-- XR Planes Visual - hiá»ƒn thá»‹ cÃ¡c máº·t pháº³ng Ä‘Æ°á»£c phÃ¡t hiá»‡n -->
  <a-entity xr-planes-visual xr-planes class="cantap"> </a-entity>
</a-scene>
